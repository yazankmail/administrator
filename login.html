<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ± - Wusooly</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');

        body {
            margin: 0; height: 100vh; display: flex;
            justify-content: center; align-items: center;
            overflow: hidden; background-color: #000;
            font-family: 'Cairo', sans-serif;
        }

        .bg-image {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://i.ibb.co/8LVbzyP2/1770038717427.png') no-repeat center center;
            background-size: cover; z-index: -1; filter: brightness(0.6);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px;
            padding: 40px 30px; width: 90%; max-width: 400px;
            text-align: center; color: #fff; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        h2 { margin-top: 0; font-weight: 800; font-size: 28px; }
        p { color: rgba(255, 255, 255, 0.8); font-size: 14px; margin-bottom: 30px; }

        .google-btn {
            background: white; color: #333; width: 100%; padding: 12px;
            border-radius: 12px; border: none; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: 0.3s; margin-top: 10px;
        }
        .google-btn:hover { background: #f1f1f1; transform: scale(1.02); }

        #msg-box {
            margin-top: 20px; font-size: 14px; font-weight: bold;
            display: none; padding: 10px; border-radius: 8px;
        }
        .success { background: rgba(76, 175, 80, 0.2); color: #4CAF50; border: 1px solid #4CAF50; }
        .error { background: rgba(244, 67, 54, 0.2); color: #ff4747; border: 1px solid #ff4747; }
    </style>
</head>
<body>

    <div class="bg-image"></div>

    <div class="glass-card">
        <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ðŸ‘‹</h2>
        <p>Ø¨ÙˆØ§Ø¨Ø© Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ¬Ø± Wusooly</p>

        <button id="login-btn" class="google-btn">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20">
            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Google)
        </button>

        <div id="msg-box"></div>
        <div style="margin-top: 30px; font-size: 12px; opacity: 0.5;">Wusooly Admin Panel &copy; 2026</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, setPersistence, browserLocalPersistence, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBa0RwEcbVqWYAKeUFeZy2IDihaxUxtNKY",
            authDomain: "wusooly-1906b.firebaseapp.com",
            projectId: "wusooly-1906b",
            storageBucket: "wusooly-1906b.firebasestorage.app",
            messagingSenderId: "95836343161",
            appId: "1:95836343161:web:73ae3faaca406c0bf7fda8"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();
        const ADMIN_EMAIL = "hmamda320@gmail.com";

        const btn = document.getElementById('login-btn');
        const msgBox = document.getElementById('msg-box');

        function showMsg(text, type) {
            msgBox.innerText = text;
            msgBox.className = type;
            msgBox.style.display = 'block';
        }

        // ÙØ­Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹
        onAuthStateChanged(auth, (user) => {
            if (user && user.email === ADMIN_EMAIL) {
                showMsg("Ø£Ù†Øª Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„ÙØ¹Ù„.. Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ðŸ”„", "success");
                setTimeout(() => window.location.href = "index.html", 1000);
            }
        });

        btn.addEventListener('click', () => {
            btn.disabled = true;
            btn.innerText = "Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©...";

            // 1. ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¬Ù„Ø³Ø© Ø£ÙˆÙ„Ø§Ù‹ (Ø£Ù‡Ù… Ø®Ø·ÙˆØ© Ù„Ù…Ù†Ø¹ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)
            setPersistence(auth, browserLocalPersistence)
                .then(() => {
                    // 2. ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
                    return signInWithPopup(auth, provider);
                })
                .then((result) => {
                    const user = result.user;
                    if (user.email === ADMIN_EMAIL) {
                        showMsg(`Ø£Ù‡Ù„Ø§Ù‹ ${user.displayName}! ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…`, "success");
                        // 3. Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø­ÙØ¸
                        setTimeout(() => window.location.href = "index.html", 1500);
                    } else {
                        showMsg("â›” Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„ÙŠØ³ Ù„Ù„Ù…Ø¯ÙŠØ±!", "error");
                        auth.signOut();
                        btn.disabled = false;
                        btn.innerHTML = '<img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Google)';
                    }
                })
                .catch((error) => {
                    console.error(error);
                    showMsg("Ø­Ø¯Ø« Ø®Ø·Ø£: " + error.message, "error");
                    btn.disabled = false;
                    btn.innerHTML = '<img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Google)';
                });
        });
    </script>
</body>
</html>
